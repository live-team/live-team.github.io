require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(b){b.firebase&&(b.firebase.util=a("firebase-util"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"firebase-util":void 0}],2:[function(a,b,c){"use strict";function d(a,b,c){var d=f.extend({},j,a);return d.maxCacheSize||(d.maxCacheSize=3*d[b]),e(d,b,c),e(d,"maxCacheSize",c),d}function e(a,b,c){if("number"!=typeof a[b])throw new Error("Argument "+b+" passed into opts for "+c+"must be a number")}var f=a("../common"),g=a("./libs/Scroll.js"),h=a("./libs/Paginate.js"),i=a("./libs/ReadOnlyRef.js"),j={field:null,pageSize:10,windowSize:250};c.Scroll=function(a,b,c){if(!f.isFirebaseRef(a)||f.isQueryRef(a))throw new Error("First argument to Firebase.util.Scroll must be a valid Firebase ref. It cannot be a Query (e.g. you have called orderByChild()).");if("string"!=typeof b)throw new Error("Second argument to Firebase.util.Scroll must be a valid string");if(arguments.length>2&&!f.isObject(c))throw new Error("Optional third argument to Firebase.util.Scroll must be an object of key/value pairs");var e=new i(a);return e.scroll=new g(e,b,d(c,"windowSize","Scroll")),e},c.Paginate=function(a,b,c){if(!f.isFirebaseRef(a)||f.isQueryRef(a))throw new Error("First argument to Firebase.util.Paginate must be a valid Firebase ref. It cannot be a Query (e.g. you have called orderByChild()).");if("string"!=typeof b)throw new Error("Second argument to Firebase.util.Paginate must be a valid string");if(arguments.length>2&&!f.isObject(c))throw new Error("Optional third argument to Firebase.util.Paginate must be an object of key/value pairs");var e=new i(a);return e.page=new h(e,b,d(c,"pageSize","Paginate")),e}},{"../common":9,"./libs/Paginate.js":5,"./libs/ReadOnlyRef.js":6,"./libs/Scroll.js":7}],3:[function(a,b,c){"use strict";function d(a,b,c){e.log.debug("Cache: caching %s using field=%s maxRecordsLoaded=%d",a.toString(),b,c),this.offset=new f({field:b,max:c,ref:a.ref}),this.outRef=a,this.inRef=null,this.queryRef=null,this.countRef=null,this.keys={},this.start=0,this.count=-1,this.endCount=-1,this.nextListeners=[],this.offset.observe(this._keyChange,this)}var e=a("../../common"),f=a("./Offset");d.prototype.moveTo=function(a,b){e.log.debug("Cache.moveTo: startOffset=%d, numberOfRecords=%d",a,b);var c=this.start,d=this.count;this.start=a,this.count=b,this.endCount=this.start+this.count,c!==this.start?this.offset.goTo(a,b):d!==this.count&&this._refChange()},d.prototype.hasNext=function(){return this.count===-1||this.endCount>this.start+this.count},d.prototype.hasPrev=function(){return this.start>0},d.prototype.observeHasNext=function(a,b){var c=this.nextListeners,d=[a,b];return c.push(d),function(){e.remove(c,d)}},d.prototype.destroy=function(){this._unsubscribe(),this.offset.destroy(),this.offset=null,this.start=0,this.count=-1,this.inRef=null,this.outRef=null,this.queryRef=null,this.countRef=null,this.keys=null,this.nextListeners=null},d.prototype._keyChange=function(a,b,c){this.inRef=c,e.log.debug("Cache._keyChange: %s %s %s",a,b,c.toString()),this._refChange()},d.prototype._unsubscribe=function(){this.queryRef&&(this.queryRef.off("child_added",this._add,this),this.queryRef.off("child_removed",this._remove,this),this.queryRef.off("child_moved",this._move,this),this.queryRef.off("child_changed",this._change,this),this.queryRef.off("value",this._value,this),this.queryRef.off("value",this._removeOrphans,this),this.queryRef=null),this.countRef&&(this.countRef.off("value",this._count,this),this.countRef=null)},d.prototype._refChange=function(){this._unsubscribe(),this.inRef&&this.count>-1&&(this.countRef=this.inRef.limitToFirst(this.count+1),this.countRef.on("value",this._count,this),this.queryRef=this.inRef.limitToFirst(this.count),this.queryRef.on("child_added",this._add,this),this.queryRef.on("child_removed",this._remove,this),this.queryRef.on("child_moved",this._move,this),this.queryRef.on("child_changed",this._change,this),this.queryRef.on("value",this._value,this),this.queryRef.once("value",this._removeOrphans,this))},d.prototype._add=function(a,b){var c=a.key;e.has(this.keys,c)?e.isEqual(this.keys[c],a.val())||this._change(a):(this.keys[c]=a,this.outRef.$trigger("child_added",a,b))},d.prototype._remove=function(a){var b=a.key;e.has(this.keys,b)&&(this.outRef.$trigger("child_removed",a),delete this.keys[b])},d.prototype._move=function(a,b){var c=a.key;e.has(this.keys,c)&&(this.keys[c]=a,this.outRef.$trigger("child_moved",a,b))},d.prototype._change=function(a){this.keys[a.key]=a,this.outRef.$trigger("child_changed",a)},d.prototype._value=function(a){this.outRef.$trigger("value",a)},d.prototype._count=function(a){this.endCount=this.start+a.numChildren();var b=this.hasNext();e.each(this.nextListeners,function(a){a[0].call(a[1],b)})},d.prototype._removeOrphans=function(a){e.each(this.keys,function(b,c){a.hasChild(c)||(this.outRef.$trigger("child_removed",b),delete this.keys[c])},this)},b.exports=d},{"../../common":9,"./Offset":4}],4:[function(a,b,c){"use strict";function d(a){this.keys=[],this.field=a.field,this.ref=g(a.ref,a.field),this.max=a.max,this.listeners=[],this.curr=0,this.sub=null,this.isSubscribing=!1,this.lastNotifyValue=j.undef,this._debouncedRecache=h(function(){j.log.debug("Offset._debouncedRecache: recaching keys for offset %d",this.curr),this.keys=[],this._grow(this._listen)},this,100,1e3)}function e(a,b){var c;switch(b){case"$key":c=a.key;break;case"$priority":c=a.getPriority();break;case"$value":c=a.val();break;default:var d=a.val();if(!j.isObject(d))throw new Error("A value of type "+typeof d+'Was found. But we are attempting to order by child field "'+b+"\". Pagination requires all records to be objects or it can't determine an appropriate offset value.");c=d[b]}return{val:c,key:a.key}}function f(a,b){return b===!1?null:null===b?a:a.startAt(b.val,b.key)}function g(a,b){return"$key"===b?a.orderByKey():"$priority"===b?a.orderByPriority():"$value"===b?a.orderByValue():a.orderByChild(b)}function h(a,b,c,d){function e(){if(i&&(i(),i=null),h&&Date.now()-h>d)k||(k=!0,setTimeout(f,0));else{h||(h=Date.now());var a=setTimeout(f,c);i=function(){clearTimeout(a)}}}function f(){i=null,h=null,k=!1,a.apply(b,j)}function g(){j=Array.prototype.slice.call(arguments,0),e()}var h,i,j,k;if("number"==typeof b&&(d=c,c=b,b=null),"number"!=typeof c)throw new Error("Must provide a valid integer for wait. Try 0 for a default");if("function"!=typeof a)throw new Error("Must provide a valid function to debounce");return d||(d=10*c||100),g.running=function(){return h>0},g}function i(a){var b=a.length;return b?a[b-1]:null}var j=a("../../common");d.prototype.goTo=function(a){a!==this.curr&&(j.log("Offset.goTo: offset changed from %d to %d",this.curr,a),this.curr=a,this.lastNotifyValue=j.undef,this._listen())},d.prototype.observe=function(a,b){this.listeners.push([a,b]);var c=this.getKey(),d=f(this.ref,c);a.call(b,c&&c.val,c&&c.key,d)},d.prototype.getKey=function(a){return arguments.length||(a=this.curr),0===a?null:this.keys.length>a&&this.keys[a]},d.prototype.destroy=function(){this._unsubscribe(),this.curr=0,this.keys=[],this.lastNotifyValue=j.undef,this.isSubscribing=!1},d.prototype._notify=function(){var a=this.getKey();if(!j.isEqual(this.lastNotifyValue,a)){j.log("Offset._notify: key at offset %d is %s",this.curr,a&&a.key),this.lastNotifyValue=a;var b=f(this.ref,a);j.each(this.listeners,function(c){c[0].call(c[1],a&&a.val,a&&a.key,b)})}},d.prototype._recache=function(){this.isSubscribing||this._debouncedRecache()};var k=0;d.prototype._grow=function(a){var b=this,c=b.keys.length;if(b.curr>=c){var d=b.getKey(),f=i(b.keys),g=Math.min(b.curr+(f?2:1)-c,b.max),h=null!==f?b.ref.startAt(f.val,f.key):b.ref;h.limitToFirst(g).once("value",function(c){var h=null!==f;if(c.forEach(function(a){return h?void(h=!1):void b.keys.push(e(a,b.field))}),k++>1e4)throw new Error("Tried to fetch more than 10,000 pages to determine the correct offset. Giving up now. Sorry.");b.curr>=b.keys.length&&c.numChildren()===g?setTimeout(j.bind(b._grow,b,a),0):(k=0,j.log.debug("Offset._grow: Cached %d keys",b.keys.length),a.call(b,!j.isEqual(b.getKey(),d)))})}else a.call(b,!1)},d.prototype._startOffset=function(){return Math.max(0,this.curr-this.max,this.curr-10)},d.prototype._queryRef=function(){var a=this._startOffset(),b=this.ref;if(a>0){var c=this.getKey(a);b=b.startAt(c.val,c.key)}return b.limitToLast(Math.max(this.curr-a,1))},d.prototype._moved=function(a){a.key===this.getKey()&&this._recache()},d.prototype._unsubscribe=function(){this.sub&&(this.sub.off("child_added",this._recache,this),this.sub.off("child_moved",this._moved,this),this.sub.off("child_removed",this._recache,this),this.sub.off("value",this._doneSubscribing,this),this.sub=null)},d.prototype._subscribe=function(){this._unsubscribe(),this.sub=this._queryRef(),this.isSubscribing=!0,this.sub.on("child_added",this._recache,this),this.sub.on("child_moved",this._moved,this),this.sub.on("child_removed",this._recache,this),this.sub.once("value",this._doneSubscribing,this)},d.prototype._doneSubscribing=function(){this.isSubscribing=!1,this._notify()},d.prototype._monitorEmptyOffset=function(){function a(e){var f=e.numChildren();f>(null===d?0:1)&&(j.log.debug("Offset._monitorEmptyOffset: A value exists now."),c.off("value",a),b._grow())}var b=this,c=b.ref,d=null;this.keys.length&&(d=i(this.keys),c=c.startAt(d.val,d.key)),j.log.debug("Offset._monitorEmptyOffset: No value exists at offset %d, currently %d keys at this path. Watching for a new value.",this.curr,this.keys.length),c.limitToFirst(2).on("value",a)},d.prototype._listen=function(){this._unsubscribe(),this.curr>=this.keys.length?this._grow(function(){this.keys.length>=this.curr?this._subscribe():(this._monitorEmptyOffset(),this._notify())}):this._subscribe()},b.exports=d},{"../../common":9}],5:[function(a,b,c){"use strict";function d(a,b,c){this.currPage=0,this.field=b,this.ref=a,this.pageSize=c.pageSize,this.max=c.maxCacheSize,this.subs=[],this.pageChangeListeners=[],this.pageCountListeners=[],this.cache=new h(a,b,c.maxCacheSize),this.pageCount=-1,this.couldHaveMore=!1,this.cache.observeHasNext(this._countPages,this)}function e(a,b){return 0===a?0:Math.ceil(a/b)}function f(a,b){var c={};if(c.bindFunction=function(a,b){return function(){return a.apply(b,[b])}},c.stateChange=function(a){4==c.request.readyState&&c.callbackFunction(c.request.responseText)},c.getRequest=function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):!!window.XMLHttpRequest&&new XMLHttpRequest},c.postBody=arguments[2]||"",c.callbackFunction=b,c.url=a,c.request=c.getRequest(),c.request){var d=c.request;d.onreadystatechange=c.bindFunction(c.stateChange,c),""!==c.postBody?(d.open("POST",a,!0),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.setRequestHeader("Connection","close")):d.open("GET",a,!0),d.send(c.postBody)}return c}var g=a("../../common"),h=a("./Cache");d.prototype.next=function(){return this.hasNext()&&(this.currPage++,g.log.debug("Paginate.next: current page is %d",this.currPage),this._pageChange()),this},d.prototype.prev=function(){return this.hasPrev()&&(this.currPage--,g.log.debug("Paginate.prev: current page is %d",this.currPage),this._pageChange()),this},d.prototype.setPage=function(a){a>0&&a<=this.pageCount?(this.currPage=a,g.log.debug("Paginate.setPage: current page is %d",this.currPage),this._pageChange()):g.log.warn("Paginate.setPage: invalid page number %d",a)},d.prototype.hasNext=function(){return this.cache.hasNext()},d.prototype.hasPrev=function(){return this.currPage>1},d.prototype.onPageChange=function(a,b){var c=this.pageChangeListeners,d=[a,b];return c.push(d),a.call(b,this.currPage),function(){g.remove(c,d)}},d.prototype.onPageCount=function(a,b){var c=this.pageCountListeners,d=[a,b];return c.push(d),this.pageCount>-1?a.call(b,this.pageCount,this.couldHaveMore):this._countPages(),function(){g.remove(c,d)}},d.prototype.getCountByDowloadingAllKeys=function(a,b){var c=this;c.downloadingEverything=!0;var d=c.ref.ref.toString();d.match(/\/$/)||(d+="/"),d+=".json?shallow=true",f(d,function(d){var f=0;try{f=g.keys(JSON.parse(d)).length}catch(h){g.log.warn(h)}g.log.debug("Paginate.getCountByDownloadingAllKeys: found %d keys",f),c.downloadingEverything=!1,c.pageCount=e(f,c.pageSize),c.couldHaveMore=!1,c._notifyPageCount(),a&&a.call(b,f)})},d.prototype.destroy=function(){this.cache.destroy(),this.cache=null,this.ref=null,g.each(this.subs,function(a){a()}),this.subs=[],this.pageCountListeners.length=0,this.pageChangeListeners.length=0},d.prototype._countPages=function(){var a=this,b=a.currPage;if(!this.downloadingEverything)if(a.pageCount===-1){var c=a.max,d=a.pageSize,e=this.ref.ref.limitToFirst(c);e.once("value",function(b){a.pageCount===-1&&(a.couldHaveMore=b.numChildren()===c,a.pageCount=Math.ceil(b.numChildren()/d),a._notifyPageCount(),a._countPages())})}else b>=a.pageCount&&(a.pageCount=b,a.couldHaveMore=a.cache.hasNext(),a._notifyPageCount())},d.prototype._pageChange=function(){var a=this.currPage,b=(a-1)*this.pageSize;this.cache.moveTo(b,this.pageSize),this._countPages(),g.each(this.pageChangeListeners,function(b){b[0].call(b[1],a)})},d.prototype._notifyPageCount=function(){var a=this.pageCount,b=this.couldHaveMore;g.each(this.pageCountListeners,function(c){c[0].call(c[1],a,b)})},b.exports=d},{"../../common":9,"./Cache":3}],6:[function(a,b,c){"use strict";function d(a){this._ref=a,this._obs=new h.Observable(["value","child_added","child_removed","child_moved","child_changed"]),this.ref=this._ref}function e(a){return function(){var b=h.toArray(arguments),c=this.ref;return c[a].apply(c,b)}}function f(a){return function(){throw new Error(a+" is not supported. This is a read-only reference. You can modify child records after calling .child(), or work with the original by using .ref")}}function g(a){return function(){throw new Error(a+" is not supported for Paginate and Scroll references. Try calling it on the original reference used to create the instance instead.")}}var h=a("../../common");d.prototype={on:function(a,b,c,d){this._obs.observe(a,b,c,d)},once:function(a,b,c,d){function e(c){f.off(a,e,f),b.call(d,c)}var f=this;this.on(a,e,c,this)},off:function(a,b,c){this._obs.stopObserving(a,b,c)},child:e("child"),parent:e("parent"),root:e("root"),name:e("name"),key:e("key"),toString:e("toString"),auth:e("auth"),unauth:e("unauth"),authWithCustomToken:e("authWithCustomToken"),authAnonymously:e("authAnonymously"),authWithPassword:e("authWithPassword"),authWithOAuthPopup:e("authWithOAuthPopup"),authWithOAuthRedirect:e("authWithOAuthRedirect"),authWithOAuthToken:e("authWithOAuthToken"),getAuth:e("getAuth"),onAuth:e("onAuth"),offAuth:e("offAuth"),createUser:e("createUser"),changePassword:e("changePassword"),removeUser:e("removeUser"),resetPassword:e("resetPassword"),changeEmail:e("changeEmail"),goOffline:e("goOffline"),goOnline:e("goOnline"),set:f("set"),update:f("update"),remove:f("remove"),push:f("push"),setWithPriority:f("setWithPriority"),setPriority:f("setPriority"),transaction:f("transaction"),limit:g("limit"),onDisconnect:g("onDisconnect"),orderByChild:g("orderByChild"),orderByKey:g("orderByKey"),orderByPriority:g("orderByPriority"),limitToFirst:g("limitToFirst"),limitToLast:g("limitToLast"),startAt:g("startAt"),endAt:g("endAt"),equalTo:g("equalTo"),$trigger:function(){this._obs.triggerEvent.apply(this._obs,h.toArray(arguments))}},b.exports=d},{"../../common":9}],7:[function(a,b,c){"use strict";function d(a,b,c){this.max=c.windowSize,this.start=0,this.end=0,this.cache=new e(a,b,c.maxCacheSize)}var e=a("./Cache");d.prototype.next=function(a){this.hasNext()&&(this.end=this.end+a,this.start=Math.max(0,this.end-this.max,this.start),this.cache.moveTo(this.start,this.end-this.start))},d.prototype.prev=function(a){this.hasPrev()&&(this.start=Math.max(0,this.start-a),this.end=Math.min(this.start+this.max,this.end),this.cache.moveTo(this.start,this.end-this.start))},d.prototype.hasNext=function(){return this.cache.hasNext()},d.prototype.hasPrev=function(){return this.start>0},d.prototype.observeHasNext=function(a,b){return this.cache.observeHasNext(a,b)},d.prototype.destroy=function(){this.cache.destroy(),this.ref=null,this.cache=null},b.exports=d},{"./Cache":3}],8:[function(a,b,c){var d=a("./index.js");c.log=d.log,c.logLevel=d.logLevel,c.escapeEmail=d.escapeEmail},{"./index.js":9}],9:[function(a,b,c){var d=a("./libs/util.js"),e=a("./libs/logger.js");d.extend(c,d,{args:a("./libs/args.js"),log:e,logLevel:e.logLevel,Observable:a("./libs/Observable.js"),Observer:a("./libs/Observer.js"),queue:a("./libs/queue.js")})},{"./libs/Observable.js":10,"./libs/Observer.js":11,"./libs/args.js":12,"./libs/logger.js":13,"./libs/queue.js":14,"./libs/util.js":15}],10:[function(a,b,c){"use strict";function d(a,b){b||(b={}),this._observableProps=h(a,b),this.resetObservers()}function e(a,b){i.each(b,function(b){var c=i.indexOf(a,b);c>=0&&a.splice(c,1)})}function f(a,b){var c=[];return i.each(b,function(b){i.has(a.observers,b)?a.observers[b].length&&(c=c.concat(a.observers[b])):k.warn("Observable.hasObservers: invalid event type %s",b)}),c}function g(a,b,c){i.has(b.oneTimeResults,a)&&c.notify.apply(c,b.oneTimeResults[a])}function h(a,b){return i.extend({onAdd:i.noop,onRemove:i.noop,onEvent:i.noop,oneTimeEvents:[]},b,{eventsMonitored:a,observers:{},oneTimeResults:{}})}var i=a("./util.js"),j=a("./args.js"),k=a("./logger.js"),l=a("./Observer.js");d.prototype={observe:function(a,b,c,d){var e,f=j("observe",arguments,2,4);return a=f.nextFromReq(this._observableProps.eventsMonitored),a&&(b=f.nextReq("function"),c=f.next("function"),d=f.next("object"),e=new l(this,a,b,d,c),this._observableProps.observers[a].push(e),this._observableProps.onAdd(a,e),this.isOneTimeEvent(a)&&g(a,this._observableProps,e)),e},hasObservers:function(a){return this.getObservers(a).length>0},stopObserving:function(a,b,c){var d=j("stopObserving",arguments);a=d.next(["array","string"],this._observableProps.eventsMonitored),b=d.next(["function"]),c=d.next(["object"]),i.each(a,function(a){var d=[],f=this.getObservers(a);i.each(f,function(e){e.matches(a,b,c)&&(e.notifyCancelled(null),d.push(e))},this),e(this._observableProps.observers[a],d),d.length&&this._observableProps.onRemove(a,d)},this)},abortObservers:function(a){var b=[];if(this.hasObservers()){var c=this.getObservers().slice();i.each(c,function(c){c.notifyCancelled(a),b.push(c)},this),this.resetObservers(),b.length&&this._observableProps.onRemove(this.event,b)}},getObservers:function(a){return a=j("getObservers",arguments).listFrom(this._observableProps.eventsMonitored,!0),f(this._observableProps,a)},triggerEvent:function(a){var b=j("triggerEvent",arguments),c=b.listFromWarn(this._observableProps.eventsMonitored,!0),d=b.restAsList();c&&i.each(c,function(b){if(this.isOneTimeEvent(a)){if(i.isArray(this._observableProps.oneTimeResults,a))return void k.warn("One time event was triggered twice, should by definition be triggered once",a);this._observableProps.oneTimeResults[a]=d}var c=this.getObservers(b),e=0;i.each(c,function(a){a.notify.apply(a,d.slice(0)),e++}),this._observableProps.onEvent.apply(null,[b,e].concat(d.slice(0)))},this)},resetObservers:function(){i.each(this._observableProps.eventsMonitored,function(a){this._observableProps.observers[a]=[]},this)},isOneTimeEvent:function(a){return i.contains(this._observableProps.oneTimeEvents,a)},observeOnce:function(a,b,c,d){var e,f=j("observeOnce",arguments,2,4);return a=f.nextFromWarn(this._observableProps.eventsMonitored),a&&(b=f.nextReq("function"),c=f.next("function"),d=f.next("object"),e=new l(this,a,b,d,c,(!0)),this._observableProps.observers[a].push(e),this._observableProps.onAdd(a,e),this.isOneTimeEvent(a)&&g(a,this._observableProps,e)),e}},b.exports=d},{"./Observer.js":11,"./args.js":12,"./logger.js":13,"./util.js":15}],11:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){if("function"!=typeof c)throw new Error("Must provide a valid notifyFn");this.observable=a,this.fn=c,this.event=b,this.cancelFn=e||function(){},this.context=d,this.oneTimeEvent=!!f}var e=a("./util.js");d.prototype={notify:function(){var a=e.toArray(arguments);this.fn.apply(this.context,a),this.oneTimeEvent&&this.observable.stopObserving(this.event,this.fn,this.context)},matches:function(a,b,c){return e.isArray(a)?e.contains(a,function(a){return this.matches(a,b,c)},this):!(a&&a!==this.event||b&&b!==this&&b!==this.fn||c&&c!==this.context)},notifyCancelled:function(a){this.cancelFn.call(this.context,a||null)}},b.exports=d},{"./util.js":15}],12:[function(a,b,c){"use strict";function d(a,b,c,e){if("string"!=typeof a||!i.isObject(b))throw new Error("Args requires at least 2 args: fnName, arguments[, minArgs, maxArgs]");if(!(this instanceof d))return new d(a,b,c,e);this.fnName=a,this.argList=i.toArray(b),this.origArgs=i.toArray(b);var f=this.length=this.argList.length;if(this.pos=-1,i.isUndefined(c)&&(c=0),i.isUndefined(e)&&(e=this.argList.length),f<c||f>e){var g=e>c?i.printf("%d to %d",c,e):c;throw Error(i.printf("%s must be called with %s arguments, but received %d",a,g,f))}}function e(a,b){return b===!0||(i.isArray(b)||(b=[b]),i.contains(b,function(b){switch(b){case"array":return i.isArray(a);case"string":return"string"==typeof a;case"number":return isFinite(parseInt(a,10));case"int":case"integer":return isFinite(parseFloat(a));case"object":return i.isObject(a);case"function":return"function"==typeof a;case"bool":case"boolean":return"boolean"==typeof a;case"boolean-like":return!i.isObject(a);default:throw new Error("Args received an invalid data type: "+b)}}))}function f(a,b,c,d){if(d=i.printf("%s: invalid argument at pos %d, %s (received %s)",b,c,d),a===!0)throw new Error(d);if(!i.has(j,a))throw new Error("The `required` value passed to Args methods must either be true or a method name from logger");j[a](d)}function g(a,b,c){j.warn("%s: invalid choice %s, must be one of [%s]",a,b,c)}function h(a,b){if(b===!0)return a;var c=i.isArray(b)?b[0]:b;switch(c){case"array":return i.isArray(a)?a:[a];case"string":return a+"";case"number":return parseFloat(a);case"int":case"integer":return parseInt(a,10);case"bool":case"boolean":case"boolean-like":return!!a;case"function":case"object":return a;default:throw new Error("Args received an invalid data type: "+c)}}var i=a("./util.js"),j=a("./logger.js");d.prototype={orig:function(){return this.origArgs.slice(0)},restAsList:function(a,b){var c=this.argList.slice(0);if(a||b)for(var d=0,e=c.length;d<e;d++)this._arg(b||!0,null,d<a);return c},skip:function(){return this.argList.length&&(this.pos++,this.argList.shift()),this},next:function(a,b){return this._arg(a,b,!1)},nextWarn:function(a,b){return this._arg(a,b,"warn")},nextReq:function(a){return this._arg(a,null,!0)},nextFrom:function(a,b){return this._from(a,b,!1)},nextFromWarn:function(a,b){return this._from(a,b,"warn")},nextFromReq:function(a){return this._from(a,null,!0)},listFrom:function(a,b){return this._list(a,b,!1)},listFromWarn:function(a,b){return this._list(a,b,"warn")},listFromReq:function(a){return this._list(a,null,!0)},_arg:function(a,b,c){return this.pos++,(i.isUndefined(a)||null===a)&&(a=!0),this.argList.length&&e(this.argList[0],a)?h(this.argList.shift(),a):(c&&f(c,this.fnName,this.pos,i.printf("must be of type %s",a)),b)},_from:function(a,b,c){return this.pos++,this.argList.length&&i.contains(a,this.argList[0])?this.argList.shift():(c&&f(c,this.fnName,this.pos,i.printf("must be one of %s",a)),b)},_list:function(a,b,c){this.pos++;var d=[],e=this.argList[0];return!this.argList.length||i.isEmpty(e)||!i.isArray(e)&&i.isObject(e)||(this.argList.shift(),i.isArray(e)?d=i.map(e,function(b){return i.contains(a,b)?b:void g(this.fnName,b,a)},this):i.contains(a,e)?d=[e]:g(this.fnName,e,a)),i.isEmpty(d)?(c&&f(c,this.fnName,this.pos,i.printf("choices must be in [%s]",a)),b===!0?a:b):d}},b.exports=d},{"./logger.js":13,"./util.js":15}],13:[function(a,b,c){"use strict";function d(a){return a.charAt(0).toUpperCase()+a.substr(1)}function e(){var a;return"undefined"!=typeof window&&window.location&&window.location.search&&(a=window.location.search.match("\bdebugLevel=([0-9]+)\b")),a?parseInt(a[1],10):i}function f(){return!0}function g(a,b){return!b.length||(a instanceof RegExp?!a.test(b[0]+""):!(b[0]+"").match(a))}function h(a){switch(a){case!1:return 0;case"off":return 0;case"none":return 0;case"error":return 1;case"warn":return 2;case"warning":return 2;case"info":return 3;case"log":return 4;case"debug":return 5;case!0:return i;case"on":return i;case"all":return i;default:return i}}var i=2,j=!1,k={error:f,warn:f,info:f,log:f,debug:f,time:f,timeEnd:f,group:f,groupEnd:f},l=a("./util.js"),m=function(){m.log.apply(null,l.toArray(arguments))};m.warn=f,m.error=f,m.info=f,m.log=f,m.debug=f,m.isErrorEnabled=f,m.isWarnEnabled=f,m.isInfoEnabled=f,m.isLogEnabled=f,m.isDebugEnabled=f,m.logLevel=function(a,b){if("number"!=typeof a&&(a=h(a)),j===a)return function(){};l.each(["error","warn","info","log","debug"],function(c,e){var h="undefined"!=typeof console&&a>=e+1;if(h){var i=l.bind(console["debug"===c?"log":c],console);m[c]=function(){var a=l.toArray(arguments);if(a.length>1&&"string"==typeof a[0]){var c=a[0].match(/(%s|%d|%j)/g);if(c){var d=[l.printf.apply(l,a)];a=a.length>c.length+1?d.concat(a.slice(c.length+1)):d}}b&&g(b,a)||i.apply("undefined"==typeof console?k:console,a)}}else m[c]=f;m["is"+d(c)+"Enabled"]=function(){return h}});var c=function(a){return function(){m.logLevel(a)}}(j);return j=a,c},m.logLevel(e()),b.exports=m},{"./util.js":15}],14:[function(a,b,c){"use strict";function d(a){this.needs=0,this.met=0,this.queued=[],this.errors=[],this.criteria=[],this.processing=!1,e.each(a,this.addCriteria,this)}var e=a("./util.js");d.prototype={addCriteria:function(a,b){if(this.processing)throw new Error("Cannot call addCriteria() after invoking done(), fail(), or handler() methods");return this.criteria.push(b?[a,b]:a),this},getHandler:function(){var a,b;return this.addCriteria(function(c){b!==e.undef?c(b):a=c}),function(c){a?a(c):b=c}},ready:function(){return this.needs===this.met},done:function(a,b){return a&&this._runOrStore(function(){this.hasErrors()||a.call(b)}),this},fail:function(a,b){return this._runOrStore(function(){this.hasErrors()&&a.apply(b,this.getErrors())}),this},handler:function(a,b){return this._runOrStore(function(){a.apply(b,this.getErrors())}),this},chain:function(a){return this.addCriteria(a.handler,a),this},when:function(a){this._runOrStore(function(){this.hasErrors()?a.reject.apply(a,this.getErrors()):a.resolve()})},addError:function(a){this.errors.push(a)},hasErrors:function(){return this.errors.length},getErrors:function(){return this.errors.slice(0)},_process:function(){this.processing=!0,this.needs=this.criteria.length,e.each(this.criteria,this._evaluateCriteria,this)},_evaluateCriteria:function(a){var b=null;e.isArray(a)&&(b=a[1],a=a[0]);try{a.call(b,e.bind(this._criteriaMet,this))}catch(c){this.addError(c)}},_criteriaMet:function(a){a&&this.addError(a),this.met++,this.ready()&&e.each(this.queued,this._run,this)},_runOrStore:function(a){this.processing||this._process(),this.ready()?this._run(a):this.queued.push(a)},_run:function(a){a.call(this)}},b.exports=function(a,b){var c=new d(a);return b&&c.done(b),c}},{"./util.js":15}],15:[function(a,b,c){(function(b){"use strict";function d(a,b){switch(b){case"%d":return parseInt(a,10);case"%j":return a=k.isObject(a)?JSON.stringify(a):a+"",a.length>500&&(a=a.substr(0,500)+".../*truncated*/...}"),a;case"%s":return a+"";default:return a}}function e(a){return k.isObject(a)&&a+""=="[object Arguments]"}function f(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}function g(a,b){var c,d;for(c=0,d=this.length;c<d;++c)c in this&&a.call(b,this[c],c,this)}function h(a){return"[object Array]"===Object.prototype.toString.call(a)}function i(a,b){if(null===this)throw new TypeError;var c,d,e=Object(this),f=e.length>>>0;if(0===f)return-1;if(c=0,arguments.length>1&&(c=Number(arguments[1]),c!==c?c=0:0!==c&&c!==1/0&&c!==-(1/0)&&(c=(c>0||-1)*Math.floor(Math.abs(c)))),c>=f)return-1;for(d=c>=0?c:Math.max(f-Math.abs(c),0);d<f;d++)if(d in e&&e[d]===a)return d;return-1}var j,k=c,l=["value","child_added","child_removed","child_updated","child_changed"];k.undef=j,k.firebase=b.firebase||a("firebase"),k.isDefined=function(a){return a!==j},k.isUndefined=function(a){return a===j},k.isObject=function(a){return Object.prototype.isPrototypeOf(a)},k.isArray=function(a){return(Array.isArray||h).call(null,a)},k.isArrayLike=function(a){return k.isArray(a)||e(a)},k.isFunction=function(a,b){return"string"==typeof b?k.isObject(a)&&k.has(a,b)&&"function"==typeof a[b]:"function"==typeof a},k.toArray=function(a,b){var c=k.map(a,function(a,b){return a});return b>0?c.slice(b):c},k.extend=function(a,b){var c=k.toArray(arguments),d="boolean"==typeof c[0]&&c.shift(),e=c.shift();return k.each(c,function(a){k.isObject(a)&&k.each(a,function(a,b){e[b]=d&&k.isObject(e[b])?k.extend(!0,e[b],a):a})}),e},k.bind=function(a,b){var c=Array.prototype.slice.call(arguments,1);return(a.bind||f).apply(a,c)},k.isEmpty=function(a){return a===j||null===a||k.isArrayLike(a)&&0===a.length||k.isObject(a)&&!k.contains(a,function(a){return!0})},k.keys=function(a){var b=[];return k.each(a,function(a,c){b.push(c)}),b},k.map=function(a,b,c){var d=[];return k.each(a,function(e,f){var g=b.call(c,e,f,a);g!==j&&d.push(g)}),d},k.mapObject=function(a,b,c){var d={};return k.each(a,function(e,f){var g=b.call(c,e,f,a);g!==j&&(d[f]=g)}),d},k.find=function(a,b,c){if(k.isArrayLike(a)){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a)===!0)return a[d]}else if(k.isObject(a)){var f;for(f in a)if(a.hasOwnProperty(f)&&b.call(c,a[f],f,a)===!0)return a[f]}return j},k.filter=function(a,b,c){var d=k.isArrayLike(a),e=d?[]:{};return k.each(a,function(f,g){b.call(c,f,g,a)&&(d?e.push(f):e[g]=f)}),e},k.reduce=function(a,b,c){return k.each(a,function(d,e){b=c(b,d,e,a)}),b},k.has=function(a,b){return k.isObject(a)&&a[b]!==j},k.val=function(a,b){return k.has(a,b)?a[b]:j},k.contains=function(a,b,c){if("function"!=typeof b){if(k.isArray(a))return k.indexOf(a,b)>-1;b=function(a){return function(b){return b===a}}(b)}return k.find(a,b,c)!==j},k.each=function(a,b,c){if(k.isArrayLike(a))(a.forEach||g).call(a,b,c);else if(k.isObject(a)){var d;for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)}},k.indexOf=function(a,b){return(a.indexOf||i).call(a,b)},k.remove=function(a,b){var c=!1;if(k.isArray(a)){var d=k.indexOf(a,b);d>-1&&(a.splice(d,1),c=!0)}else if(k.isObject(a)){var e;for(e in a)if(a.hasOwnProperty(e)&&b===a[e]){c=!0,delete a[e];break}}return c},k.defer=function(a,b){var c=k.toArray(arguments);setTimeout(k.bind.apply(null,c),0)},k.call=function(a,b){var c=k.toArray(arguments,2),d=[];return k.each(a,function(a){return"function"!=typeof a||b?void(k.isObject(a)&&"function"==typeof a[b]&&d.push(a[b].apply(a,c))):d.push(a.apply(null,c))}),d},k.isEqual=function(a,b,c){if(a===b)return!0;if(typeof a!=typeof b)return!1;if(k.isObject(a)&&k.isObject(b)){var d=k.isArrayLike(a),e=k.isArrayLike(b);if(d||e)return d&&e&&a.length===b.length&&!k.contains(a,function(a,c){return!k.isEqual(a,b[c])});var f=c?k.keys(a):k.keys(a).sort(),g=c?k.keys(b):k.keys(b).sort();return k.isEqual(f,g)&&!k.contains(a,function(a,c){
return!k.isEqual(a,b[c])})}return!1},k.bindAll=function(a,b){return k.each(b,function(c,d){"function"==typeof c&&(b[d]=k.bind(c,a))}),b},k.printf=function(){var a=k.toArray(arguments),b=a.shift(),c=b.match(/(%s|%d|%j)/g);return c&&a.length&&k.find(c,function(c){return b=b.replace(c,d(a.shift(),c)),0===a.length}),b},k.mergeToString=function(a){return 0===a.length?null:1===a.length?a[0]:"["+a.join("][")+"]"},k.construct=function(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c},k.noop=function(){};var m=[];k.isFirebaseRef=function(a){if(!k.isObject(a))return!1;var b=Object.getPrototypeOf(a);return!(!b||b.constructor!==k.firebase.database.prototype.constructor)||"object"==typeof a.ref&&"function"==typeof a.ref.transaction||k.isFirebaseRefWrapper(a)},k.isFirebaseRefWrapper=function(a){return k.contains(m,function(b){return a instanceof b})},k.isQueryRef=function(a){return k.isFirebaseRef(a)&&"function"!=typeof a.transaction},k.registerFirebaseWrapper=function(a){m.push(a)},k._mockFirebaseRef=function(a){k.firebase=a},k.escapeEmail=function(a){return(a||"").replace(".",",")},k.assertValidEvent=function(a){if(!k.contains(l,a))throw new Error("Event must be one of "+l+", but received "+a)},k.inherits=function(a,b){var c=[a.prototype].concat(k.toArray(arguments).slice(2));return a.prototype=new b,a.prototype.constructor=b,k.each(c,function(b){k.each(b,function(b,c){a.prototype[c]=b})}),a.prototype._super=function(){b.apply(this,arguments)},a},k.deepCopy=function(a){if(!k.isObject(a))return a;var b=k.isArrayLike(a)?[]:{};return k.each(a,function(a,c){b[c]=k.deepCopy(a)}),b},k.pick=function(a,b){if(!k.isObject(a))return{};var c=k.isArrayLike(a)?[]:{};return k.each(b,function(b){c[b]=a[b]}),c},k.eachByPath=function(a,b,c,d){var e={};k.each(b,function(b,c){var d=a.pathFor(c),f=a.getField(c),g=f?f.id:c;k.has(e,d.name())||(e[d.name()]={path:d,data:{}}),e[d.name()].data[g]=b}),k.each(e,function(a){c.call(d,a.path,a.data)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{firebase:"firebase"}],"firebase-util":[function(a,b,c){"use strict";var d=a("./common/index.js");d.extend(c,a("./common/exports.js"),a("./Paginate/exports.js")),"undefined"!=typeof window&&(window.hasOwnProperty("firebase")?window.firebase.util=d:console.warn("Firebase not found on the global window instance. Cannot add firebase.util namespace."))},{"./Paginate/exports.js":2,"./common/exports.js":8,"./common/index.js":9}]},{},[1]);var config={apiKey:"AIzaSyDh3eLikGkbcmKYU1trrToWHINOZ-a3rQs",authDomain:"live-team.firebaseapp.com",databaseURL:"https://live-team.firebaseio.com",storageBucket:""};firebase.initializeApp(config),window.openFirebaseConnections=[],angular.module("app",["ui.router","firebase","ngCookies","infinite-scroll","angular-toArrayFilter","naif.base64","angulartics","angulartics.google.analytics"]).constant("CONSTANTS",{key:"value"}).run(["$rootScope","$state","$cookies",function(a,b,c){a.$on("$stateChangeStart",function(d,e,f,g,h,i){firebase.auth().onAuthStateChanged(function(a){c.putObject("currentUser",null!=a?a.uid:null),e.authRequired&&null==a&&(d.preventDefault(),b.go("login"))}),e.authRequired&&null===c.getObject("currentUser")?(d.preventDefault(),b.go("login")):"login"!==e.name&&"signup"!==e.name||null===c.getObject("currentUser")||(d.preventDefault(),b.go("secure.home")),e.authRequired&&null===a.selectedProject&&"secure.home"!==e.name&&(d.preventDefault(),b.go("secure.home"))}),a.$on("$stateChangeError",function(a,c,d,e,f,g){"not permission"==g&&(a.preventDefault(),b.go("secure.dashboard"))})}]).config(["$stateProvider","$urlRouterProvider","$provide",function(a,b,c){function d(a){return function(b){var c=a(b);return window.openFirebaseConnections.push(c),c}}d.$inject=["$delegate"],c.decorator("$firebaseArray",d),c.decorator("$firebaseObject",d),b.otherwise("/home"),b.when("/",["$state",function(a){a.go("secure.home")}]),a.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginController as log"}).state("signup",{url:"/signup",templateUrl:"views/signup.html",controller:"LoginController as log"}).state("about",{url:"/about",templateUrl:"views/about.html"}).state("secure",{"abstract":!0,template:"<div ui-view='main'></div>"}).state("secure.home",{url:"/home",authRequired:!0,views:{main:{templateUrl:"views/home.html",controller:"HomeController as home"}}}).state("secure.dashboard",{url:"/dashboard/:projectid",authRequired:!0,views:{main:{templateUrl:"views/dashboard.html",controller:"DashboardController as dash"}}}).state("secure.report",{url:"/reports",authRequired:!0,views:{main:{templateUrl:"views/report.list.html",controller:"ReportController as report"}}}).state("secure.settings",{url:"/settings",authRequired:!0,views:{main:{templateUrl:"views/settings.html",controller:"SettingsController as sett",resolve:{permission:["$rootScope","$cookies","$q",function(a,b,c){var d=c.defer();return firebase.database().ref("projects/"+a.selectedProject).once("value",function(a){var c=a.val();c.ownerId!=b.getObject("currentUser")?(Materialize.toast("Sorry, you are not allowed",4e3),d.reject("not permission")):d.resolve()}),d.promise}]}}}})}]),function(){"use strict";function a(a,b,c,d){function e(c){firebase.auth().createUserWithEmailAndPassword(c.email,c.password).then(function(d){delete c.password,c.lastUpdate=(new Date).toString(),firebase.database().ref().child("users/"+d.uid).set(c);var e=d.email.replace("@","(at)");e=e.replace(".","(dot)"),firebase.database().ref().child("users_indexed/"+e).set(d.uid),a.putObject("currentUser",d.uid),b.go("secure.home")},function(a){Materialize.toast(a.message,4e3),console.log(a.message)})}function f(c){firebase.auth().signInWithEmailAndPassword(c.email,c.password).then(function(c){a.putObject("currentUser",c.uid),b.go("secure.home")},function(a){Materialize.toast(a.message,4e3),console.log(a.message)})}function g(){firebase.auth().signOut().then(function(){angular.forEach(c.openFirebaseConnections,function(a){a.$destroy()}),a.putObject("currentUser",null),a.putObject("profile",null),b.go("login")},function(a){Materialize.toast(a.message,4e3),console.log(a.message)})}function h(){return a.getObject("currentUser")}var i={createUser:e,signIn:f,signOut:g,currentUser:h};return i}angular.module("app").factory("authService",a),a.$inject=["$cookies","$state","$window","$q"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){c.signOut()}function h(c){q.model={},"bug"===c?q.modal={title:"Report Bug",icon:"bug_report",headerColor:"row red darken-3"}:"improvement"===c?q.modal={title:"Report Improvement",icon:"star",headerColor:"row orange darken-3"}:"newtask"===c?q.modal={title:"Report New Task",icon:"fiber_new",headerColor:"row blue darken-3"}:"project"===c?q.modal={title:"New Project",icon:"business",headerColor:"row grey darken-3"}:"editproject"===c&&(q.modal={title:"Edit Project",icon:"business",headerColor:"row grey darken-3","class":"active"},firebase.database().ref("projects/"+[a.selectedProject]).once("value",function(a){b.$apply(function(){q.model=a.val()})})),q.modal.type=c,$("#chips").material_chip({placeholder:"Enter a category",secondaryPlaceholder:"+Category *"}),$("#modal").openModal({dismissible:!1})}function i(){var b={},c=q.profile;if("project"===q.modal.type){q.model.ownerId=c.uid,q.model.owner=c.nickname,q.model.team={},q.model.team[c.uid]=c.email,q.model.lastUpdate=new Date;var d=firebase.database().ref().child("projects").push().key;b["/projects/"+d]=q.model,b["/users/"+c.uid+"/projects/"+d]=q.model.title,firebase.database().ref().update(b),delete q.model}else if("editproject"===q.modal.type){var d=a.selectedProject;q.model.lastUpdate=new Date,b["/projects/"+d]=q.model,firebase.database().ref("projects/"+d).once("value",function(a){angular.forEach(a.val().team,function(a,c){b["/users/"+c+"/lastUpdate"]=new Date,b["/users/"+c+"/projects/"+d]=q.model.title}),firebase.database().ref().update(b),delete q.model})}else{q.model.ownerId=c.uid,q.model.owner=c.nickname,q.model.icon=q.modal.icon,q.model.type=q.modal.type,q.model.status="unresolved";var e=$("#chips").material_chip("data");q.model.tags={},angular.forEach(e,function(a,b){q.model.tags[a.tag]=!0}),q.model.lastUpdate=new Date;var f=firebase.database().ref().child("/projects/"+a.selectedProject+"/reports").push().key;b["/projects/"+a.selectedProject+"/reports/"+f]=q.model;var g=firebase.database().ref("project_activities/"+a.selectedProject+"/"+q.model.type);g.transaction(function(a){return a+1}),angular.forEach(q.model.tags,function(b,c){var d=firebase.database().ref("project_activities/"+a.selectedProject+"/tags/"+c);d.transaction(function(a){return a+1})}),b["project_activities/"+a.selectedProject+"/unresolved/"+f]={by:c.email,type:q.model.type};var h=firebase.database().ref("project_activities/"+a.selectedProject+"/counterUnresolved");h.transaction(function(a){return a+1},function(a,c,d){c&&(firebase.database().ref().update(b),delete q.model)})}}function j(){"ALL"===q.typeFilter?(Materialize.toast("All bugs",4e3),q.search.type="bug",q.typeFilter="BUG"):"BUG"===q.typeFilter?(Materialize.toast("All improvements",4e3),q.search.type="improvement",q.typeFilter="IMP"):"IMP"===q.typeFilter?(Materialize.toast("All new tasks",4e3),q.search.type="newtask",q.typeFilter="TAS"):"TAS"===q.typeFilter&&(Materialize.toast("All reported",4e3),q.search.type="",q.typeFilter="ALL")}function k(c){var d={},e=c.which||c.keyCode;if(13===e&&q.teamMember){var f=q.teamMember.replace("@","(at)");f=f.replace(".","(dot)"),firebase.database().ref("users_indexed/"+f).once("value",function(c){c.val()?b.$apply(function(){q.model.team[c.val()]=q.teamMember,delete q.teamMember;var b=a.selectedProject;d["/users/"+c.val()+"/lastUpdate"]=new Date,d["/users/"+c.val()+"/projects/"+b]=q.model.title}):(delete q.teamMember,Materialize.toast("This user does not exist or you do not have permissions to add it :(",4e3))})}}function l(b){delete q.model.team[b];var c={},d=a.selectedProject;c["/users/"+b+"/lastUpdate"]=new Date,c["/users/"+b+"/projects/"+d]=null}function m(){var b={},c=a.selectedProject;firebase.database().ref("projects/"+c).once("value",function(a){var d=a.val();b["/projects/"+c]=null,angular.forEach(d.team,function(a,d){b["/users/"+d+"/lastUpdate"]=new Date,b["/users/"+d+"/projects/"+c]=null}),firebase.database().ref("project_activities/"+c).once("value",function(a){d.project_activities=a.val(),b["/disable_projects/"+c]=d,b["/project_activities/"+c]=null,firebase.database().ref().update(b)})}),$("#modal").closeModal()}function n(a){for(var b in a)a.hasOwnProperty(b)&&delete a[b]}function o(a){b.resourcename=a,$("#confirmdelete").openModal({dismissible:!1})}function p(a){var b={},c=q.profile;firebase.database().ref("/users/"+c.uid+"/projects/"+a).once("value",function(d){d.val()||firebase.database().ref("/projects/"+a).once("value",function(d){f(function(){var e=d.val();e.team[c.uid]=c.email,e.lastUpdate=new Date,b["/projects/"+a]=e,b["/users/"+c.uid+"/projects/"+a]=e.title,firebase.database().ref().update(b)},0)})})}var q=this;q.signOut=g,q.openModal=h,q.submitForm=i,q.reportedFilter=j,q.typeFilter="ALL",q.search={},q.addMember=k,q.removeMember=l,q.openConfirm=o,q.reset=n,a.$state=d,a.selectedProject=null,b.removeResource=m,firebase.auth().onAuthStateChanged(function(){q.currentUser=e.getObject("currentUser"),q.currentUser&&firebase.database().ref("users/").child(q.currentUser).on("value",function(a){f(function(){q.profile=Object.keys(a.val()).length>1?a.val():a.child(q.currentUser).val(),q.profile.uid=q.currentUser,p("-KPGmm52XonjVzknTwUz")},0)})})}angular.module("app").controller("MainController",a),a.$inject=["$rootScope","$scope","authService","$state","$cookies","$timeout"]}(),function(){"use strict";function a(a,b){function c(){var b=0;setInterval(function(){g.length!=b?(a.$apply(function(){f.greeting=g[b]}),b+=1):(b=0,a.$apply(function(){f.greeting=g[b]}),b+=1)},2500)}function d(a){b.createUser(a)}function e(a){b.signIn(a)}var f=this;f.signUp=d,f.signIn=e,f.greeting="olá";var g=["hallo","hoi","zdrasti","ahoj","tung","zdravo","hoi","hello","tere","moi","salut","moin","Γεια σου","szervusz","hæ","ciào","cześć","privet!","hola","tja","selam","pryvit"];c()}angular.module("app").controller("LoginController",a),a.$inject=["$scope","authService"]}(),function(){"use strict";function a(a,b,c,d){function e(b){a.selectedProject=b}function f(){$("#modal").openModal({dismissible:!1})}var g=this;g.projects=[],g.openModal=f,g.selectProject=e;var h=d.getObject("currentUser");h&&firebase.database().ref("users/").child(h).on("value",function(a){c(function(){g.projects=Object.keys(a.val()).length>1?a.child("projects").val():a.child(b.main.currentUser+"/projects").val()},0)})}angular.module("app").controller("HomeController",a),a.$inject=["$rootScope","$scope","$timeout","$cookies"]}(),function(){"use strict";function a(a,b){function c(a){var b=Object.keys(a).map(function(b){return[b,a[b]]});return b.sort(function(a,b){return b[1]-a[1]}),b}var d=this;firebase.database().ref("project_activities/"+[a.selectedProject]).on("value",function(a){b(function(){d.activities=a.val(),d.activities&&d.activities.tags&&(d.tags=c(d.activities.tags))},0)})}angular.module("app").controller("DashboardController",a),a.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function a(a,b,c,d){function e(c){if("unresolved"===c.status){var d=firebase.database().ref("project_activities/"+a.selectedProject+"/counterResolved");d.transaction(function(a){return a+1},function(d,e,f){if(d)console.log("Transaction failed abnormally!",d);else if(e){var g={};g["project_activities/"+a.selectedProject+"/resolved/"+c.$id]={by:b.main.profile.email,type:c.type},g["project_activities/"+a.selectedProject+"/unresolved/"+c.$id]=null,g["/projects/"+a.selectedProject+"/reports/"+c.$id+"/status"]="resolved",firebase.database().ref().update(g)}else console.log("We aborted the transaction");console.log("Counter Resolved ",f.val())});var e=firebase.database().ref("project_activities/"+a.selectedProject+"/counterUnresolved");e.transaction(function(a){return a-1})}else if("resolved"===c.status){var d=firebase.database().ref("project_activities/"+a.selectedProject+"/counterResolved");d.transaction(function(a){return a-1},function(d,e,f){if(d)console.log("Transaction failed abnormally!",d);else if(e){var g={};g["project_activities/"+a.selectedProject+"/resolved/"+c.$id]=null,g["project_activities/"+a.selectedProject+"/unresolved/"+c.$id]={by:b.main.profile.email,type:c.type},g["/projects/"+a.selectedProject+"/reports/"+c.$id+"/status"]="unresolved",firebase.database().ref().update(g)}else console.log("We aborted the transaction");console.log("Counter Resolved ",f.val())});var e=firebase.database().ref("project_activities/"+a.selectedProject+"/counterUnresolved");e.transaction(function(a){return a+1})}}function f(c,d){var e=b.main.profile;d.ownerId=e.uid,d.owner=e.nickname,d.lastUpdate=new Date;var f={},g=firebase.database().ref().child("/projects/"+a.selectedProject+"/reports/"+c+"/comments/").push().key;f["/projects/"+a.selectedProject+"/reports/"+c+"/comments/"+g]=d,firebase.database().ref().update(f).then(function(){Materialize.toast("thank you for comment :)",4e3)}),b.main.reset(d)}function g(a){b.selectedReport=a}function h(){b.resourcename=b.selectedReport.title,$("#confirmdelete").openModal({dismissible:!1})}function i(){var c=a.selectedProject,d=b.selectedReport.$id,e=b.selectedReport;if(delete e.$id,delete e.$priority,"unresolved"===e.status){var f=firebase.database().ref("project_activities/"+c+"/counterUnresolved");f.transaction(function(a){return a-1},function(a,b,f){if(b){var g={};firebase.database().ref("project_activities/"+c+"/unresolved/"+d).once("value",function(a){e.unresolved=a.val(),g["/disable_reports/"+c+"/"+d]=e,g["/project_activities/"+c+"/unresolved/"+d]=null,g["/projects/"+c+"/reports/"+d]=null,g["/projects/"+c+"/lastUpdate"]=new Date,firebase.database().ref().update(g)})}})}else if("resolved"===e.status){var g=firebase.database().ref("project_activities/"+c+"/counterResolved");g.transaction(function(a){return a-1},function(a,b,f){if(b){var g={};firebase.database().ref("project_activities/"+c+"/resolved/"+d).once("value",function(a){e.resolved=a.val(),g["/disable_reports/"+c+"/"+d]=e,g["/project_activities/"+c+"/resolved/"+d]=null,g["/projects/"+c+"/reports/"+d]=null,g["/projects/"+c+"/lastUpdate"]=new Date,firebase.database().ref().update(g)})}})}var h=firebase.database().ref("project_activities/"+c+"/"+e.type);h.transaction(function(a){return a-1}),angular.forEach(e.tags,function(a,b){var d=firebase.database().ref("project_activities/"+c+"/tags/"+b);d.transaction(function(a){return a-1})})}var j=this;j.reportAction=e,j.addComment=f,j.selectedReport=g,j.openConfirm=h,b.removeResource=i;var k=firebase.database().ref("projects/"+a.selectedProject+"/reports"),l=new firebase.util.Scroll(k,"-lastUpdate");j.reports=c(l),j.reports.scroll=l.scroll,d(function(){$("a#dropdown-button").dropdown(),$("ul#collapsible").collapsible({accordion:!1})},1e3)}angular.module("app").controller("ReportController",a),a.$inject=["$rootScope","$scope","$firebaseArray","$timeout"]}(),function(){"use strict";function a(a,b){function c(){var b={},c=!e.tag.file||{file:e.tag.file};b["project_activities/"+[a.selectedProject]+"/parameters/listeningTags/"+[e.tag.name]]=c,firebase.database().ref().update(b),delete e.tag}function d(b){var c={};c["project_activities/"+[a.selectedProject]+"/parameters/listeningTags/"+b]=null,firebase.database().ref().update(c)}var e=this;e.addTag=c,e.removeTag=d,firebase.database().ref("project_activities/"+[a.selectedProject]).on("value",function(a){b(function(){e.activities=a.val()},0)})}angular.module("app").controller("SettingsController",a),a.$inject=["$rootScope","$timeout"]}(),angular.module("app").run(["$templateCache",function(a){"use strict";a.put("views/about.html",'<div class="container" style="margin-top:20px"> <div class="row center-align"> <h5>liveTeam</h5> <img src="https://img.shields.io/badge/version-0.9.1-brightgreen.svg?style=flat-square"> <p>Developed by Tony Silva</p> <div class="divider"></div> </div> <div class="row"> <div class="col s3"> </div> <div class="col s3 right-align"> <a ng-href="https://br.linkedin.com/in/tonnysilva"><i class="fa fa-linkedin-square blue-grey-text text-darken-4 fa-4x" aria-hidden="true"></i><p>LinkedIn</p></a> </div> <div class="col s3"> <a ng-href="https://github.com/tonysilva"><i class="fa fa-github-square blue-grey-text text-darken-4 fa-4x" aria-hidden="true"></i><p>GitHub</p></a> </div> <div class="col s3"> </div> </div> </div>'),a.put("views/button.fab.html",'<div class="fixed-action-btn horizontal" style="bottom: 45px; right: 24px"> <a class="btn-floating btn-large blue-grey darken-4"><i class="material-icons">menu</i></a> <ul ng-if="$state.current.name != \'secure.home\'"> <li><a ng-click="main.openModal(\'bug\')" class="btn-floating red"><i class="material-icons">bug_report</i></a></li> <li><a ng-click="main.openModal(\'improvement\')" class="btn-floating orange"><i class="material-icons">star</i></a></li> <li><a ng-click="main.openModal(\'newtask\')" class="btn-floating blue"><i class="material-icons">fiber_new</i></a></li> <li><a ui-sref="secure.settings" class="btn-floating grey darken-3"><i class="material-icons">settings_applications</i></a></li> <li><a ng-click="main.signOut()" class="btn-floating grey darken-3"><i class="material-icons">exit_to_app</i></a></li> </ul> <ul ng-if="$state.current.name == \'secure.home\'"> <li><a ng-click="main.openModal(\'project\')" class="btn-floating grey darken-3"><i class="material-icons">business</i></a></li> <li><a ng-click="main.signOut()" class="btn-floating grey darken-3"><i class="material-icons">exit_to_app</i></a></li> </ul> </div> <div id="modal" class="modal modal-fixed-footer"> <nav> <div class="nav-wrapper"> <div ng-class="main.modal.headerColor"> <i class="small material-icons left" style="padding-left:15px">{{ main.modal.icon }}</i> <span style="font-size:2rem">{{ main.modal.title }}</span> </div> </div> </nav> <div class="modal-content"> <div class="row"> <form class="col s12"> <div class="row"> <div class="input-field col s12"> <input id="title" type="text" class="validate" ng-model="main.model.title" required> <label ng-class="main.modal.class" for="title">Title *</label> </div> </div> <div class="row"> <div class="input-field col s12"> <textarea id="description" class="materialize-textarea" length="120" ng-model="main.model.description"></textarea> <label ng-class="main.modal.class" for="description">Light Description</label> </div> </div> <div class="row" ng-if="main.modal.type !== \'project\' && main.modal.type !== \'editproject\'"> <div class="input-field col s12"> <div id="chips" class="chips chips-placeholder"></div> </div> </div> <div class="row" ng-if="main.modal.type === \'editproject\'"> <div class="input-field col s12"> <input id="member" type="email" class="validate" ng-model="main.teamMember" ng-keypress="main.addMember($event)"> <label for="member">+Team Member (press enter to add)</label> <div class="chip" ng-repeat="(key, value) in main.model.team" style="padding-bottom:10px"> <img src="images/coffee.4c0ab052.png" alt="team member">{{ value }} <i class="close material-icons" ng-if="(main.model.ownerId == main.currentUser && key != main.model.ownerId) || (main.model.ownerId != main.currentUser && key == main.currentUser)" ng-click="main.removeMember(key)">close</i> </div> </div> </div> </form> </div> </div> <div class="modal-footer"> <a ng-if="main.modal.type === \'editproject\' && main.model.ownerId === main.currentUser" ng-click="main.openConfirm(main.model.title)" class="modal-action modal-close waves-effect waves-light btn red">Delete</a> <a ng-click="main.reset(model)" class="modal-action modal-close waves-effect btn-flat">Cancel</a> <a ng-click="main.submitForm(model)" class="modal-action modal-close waves-effect btn-flat">Save</a> </div> </div> <script type="text/javascript"> $(document).ready(function() {    \n\t\t$(\'textarea#description\').characterCounter();\n  }); </script>'),a.put("views/confirm.tmpl.html",'<div id="confirmdelete" class="modal"> <div class="modal-content"> <h4>Confirm Delete</h4> <p>Are you sure you want to delete "{{ resourcename }}"?</p> </div> <div class="modal-footer"> <a ng-click="removeResource()" class="modal-action modal-close waves-effect waves-green btn-flat">Yes</a> <a class="modal-action modal-close waves-effect waves-green btn-flat">No</a> </div> </div>'),a.put("views/dashboard.html",'<div class="container"> <a ui-sref="secure.home" class="black-text"><i class="small material-icons left" style="padding-top:10px">keyboard_arrow_left</i></a> <h3>Dashboard</h3> </div> <div class="container"> <div class="row"> <div class="col s12 m6 l6"> <div class="card blue-grey darken-1"> <div class="card-action"> <ul> <li><a ui-sref="secure.report">Resolved<span class="new badge grey darken-3 white-text">{{ dash.activities.counterResolved }}</span></a></li> <li><a ui-sref="secure.report">Unresolved<span class="new badge grey darken-3 white-text">{{ dash.activities.counterUnresolved }}</span></a></li> </ul> </div> </div> </div> <div class="col s12 m6 l6"> <div class="card blue-grey darken-1"> <div class="card-action"> <ul> <li><a ui-sref="secure.report">Reported errors<span class="new badge red">{{ dash.activities.bug }}</span></a></li> <li><a ui-sref="secure.report">Reported new tasks<span class="new badge blue">{{ dash.activities.newtask }}</span></a></li> <li><a ui-sref="secure.report">Reported improvements<span class="new badge orange">{{ dash.activities.improvement }}</span></a></li> </ul> </div> </div> </div> </div> <div class="row"> <div class="col s6 m3" ng-repeat="(key, value) in dash.activities.parameters.listeningTags"> <div class="card blue-grey darken-1"> <div class="center-align"> <img ng-if="value.file.base64" ng-src="data:{{ value.file.filetype }};base64,{{ value.file.base64 }}" class="circle responsive-img" style="height:175px; margin:10px 0 10px 0"> <img ng-if="!value.file.base64" src="images/tag.46ef0620.png" class="responsive-img" style="height:175px; margin:10px 0 10px 0"> </div> <div class="card-action center-align flow-text"> <a>{{ key }}</a> <h4 style="font-weight: bold; font-size: 5rem">{{dash.activities.tags[key] ? dash.activities.tags[key] : 0}}</h4> </div> </div> </div> </div> </div> <!-- <div class="row">\n  <div class="col s12 m4 l3"><p></p></div>\n  <div class="col s12 m4 l6">\n  \t<div class="card-panel" style="position: relative; box-shadow: 0 1px 3px 0 rgba(0,0,0,0.16);">\n      <div class="row">\n\t\t\t\t<ul>\n          <li><a ui-sref="secure.report">Resolved<span class="new badge grey darken-3 white-text">{{ dash.activities.counterResolved }}</span></a></li>\n          <li><a ui-sref="secure.report">Unresolved<span class="new badge grey darken-3 white-text">{{ dash.activities.counterUnresolved }}</span></a></li>\n\t\t      <li><a ui-sref="secure.report">Number of reported errors<span class="new badge red">{{ dash.activities.bug }}</span></a></li>\n\t\t      <li><a ui-sref="secure.report">Number of new tasks open<span class="new badge blue">{{ dash.activities.newtask }}</span></a></li>\n\t\t      <li><a ui-sref="secure.report">Number of reported improvements<span class="new badge orange">{{ dash.activities.improvement }}</span></a></li>\n\t\t    </ul>\n      </div>\n    </div>\n  </div>\n  <div class="col s12 m4 l3"><p></p></div>\n</div> -->'),a.put("views/home.html",'<div class="container"> <h3>Projects</h3> </div> <div class="container"> <div class="collection"> <li ng-repeat="(key, value) in home.projects" style="list-style-type:none" class="collection-item blue-text"> <div>{{value}} <a ng-click="home.selectProject(key);" ui-sref="secure.dashboard" class="secondary-content" style="padding: 0 6px 0 10px; cursor:pointer"> <i class="material-icons">send</i> </a> <a ng-click="home.selectProject(key); main.openModal(\'editproject\');" ng-hide="value === \'live team\'" class="secondary-content" style="padding: 0 6px 0 10px; cursor:pointer"> <i class="material-icons">mode_edit</i> </a> </div> </li> </div> </div> <div ng-include="\'views/confirm.tmpl.html\'"></div>'),a.put("views/login.html",'<div class="container" style="margin-top:40px"> <div class="row"> <div class="col m6 s12"> <h2>{{ log.greeting }}</h2> <p class="flow-text">In a shared manner, accompany with your team all that occurs in your projects: the new tasks, problems and related improvements. Through a dashboard see information about each occurrence reported. Do everything in a simple and quick way, do not waste time. See and act.</p> </div> <div class="col m6 s12"> <h2 class="center-align">Log In</h2> <div class="row"> <form class="col s12"> <div class="row"> <div class="input-field col s12"> <input id="email" type="email" class="validate" ng-model="user.email"> <label for="email">Email</label> </div> </div> <div class="row"> <div class="input-field col s12"> <input id="pass" type="password" class="validate" ng-model="user.password"> <label for="pass">Password</label> </div> </div> <div class="row"> <div class="col s12"> <p><a ui-sref="signup">Do not have an account? Sign Up.</a></p> <p><a class="grey-text">Forgot your password?</a></p> </div> </div> <div class="divider"></div> <div class="row"> <div class="col m12 s12"> <p class="right-align"> <button class="btn waves-effect waves-light" type="submit" ng-click="log.signIn(user)"> <i class="small material-icons">done</i> </button> </p> </div> </div> </form> </div> </div> </div> </div>'),a.put("views/report.list.html",'<div class="container"> <a ui-sref="secure.dashboard" class="black-text"><i class="small material-icons left" style="padding-top:10px">keyboard_arrow_left</i></a> <h3>Reported</h3> </div> <div class="container"> <div class="row"> <div class="col s12"> <p class="flow-text center" ng-if="report.reports.length == 0">There is nothing reported in the project</p> <ul id="collapsible" infinite-scroll="report.reports.scroll.next(16)" infinite-scroll-distance="1" class="collapsible popout" data-collapsible="accordion"> <li ng-repeat="(key, value) in report.reports | filter:main.search:strict as results track by value.$id" ng-hide="!value.lastUpdate"> <div class="collapsible-header"> <div class="row valign-wrapper" style="padding-top: 20px"> <i class="material-icons" style="padding-left: 12px">{{ value.icon }}</i> <div class="col s11"> <h6 style="padding-bottom:5px">{{ value.lastUpdate | date }} - <span style="font-weight:bold">{{ value.title }}</span></h6> <h6 class="grey-text text-darken-2">{{ value.description }}</h6> <h6 class="grey-text" style="font-size:0.8rem">reported by <strong>{{ value.owner }}</strong></h6> </div> <div class="col s1"> <a ng-click="report.reportAction(value); $event.stopPropagation();" class="secondary-content"> <i class="material-icons">{{ value.status == \'unresolved\' ? \'check_circle\' : \'restore\'}}</i> </a> </div> <div class="col s1" ng-if="value.ownerId === main.currentUser"> <a id="dropdown-button" ng-click="report.selectedReport(value); $event.stopPropagation();" data-activates="dropdown" class="secondary-content dropdown-button"> <i class="material-icons">more_vert</i> </a> <ul id="dropdown" class="dropdown-content"> <li><a ng-click="report.openConfirm(value.title); $event.stopPropagation();" class="red-text">Remove</a></li> </ul> </div> </div> </div> <div class="collapsible-body"> <form style="padding: 10px 35px 0 20px"> <div class="row valign-wrapper"> <div class="input-field col s12"> <i class="tiny material-icons prefix">insert_comment</i> <input id="comment" type="text" class="validate" length="120" ng-model="comment.description"> <label for="comment">Comment</label> </div> <div class="input-field col"> <a ng-click="report.addComment(value.$id, comment)" class="secondary-content" style="cursor:pointer"> <i class="material-icons">add_circle</i> </a> </div> </div> </form> <ul class="collection" style="padding: 0 20px 10px 20px"> <li class="collection-item grey lighten-5" ng-repeat="value_ in value.comments | toArray:false | orderBy:\'-lastUpdate\' track by $index"> <h6 class="grey-text text-darken-2">{{ value_.description }}</h6> <h6 class="grey-text" style="font-size:0.8rem"><strong>{{ value_.owner }}</strong> commented on {{ value_.lastUpdate | date:\'medium\' }}</h6> </li> </ul> </div> </li> </ul> </div> </div> </div> <div ng-include="\'views/confirm.tmpl.html\'"></div>'),a.put("views/settings.html",'<div class="container"> <a ui-sref="secure.dashboard" class="black-text"><i class="small material-icons left" style="padding-top:10px">keyboard_arrow_left</i></a> <h3>Settings</h3> </div> <div class="container"> <div class="row"> <form class="col s12" name="form"> <div class="row"> <div class="input-field col s12"> <input id="tag" type="text" class="validate" ng-model="sett.tag.name"> <label for="tag">Tag name</label> </div> <div class="input-field col"> <h5>Choose an image</h5> <h6>Ideal ratio 236 × 231</h6> </div> <div class="input-field col s12"> <input type="file" ng-model="sett.tag.file" name="file" accept="image/*" maxsize="200" base-sixty-four-input> <span ng-show="form.file.$error.maxsize">Files must not exceed 200 KB</span> </div> </div> <br><a ng-click="sett.addTag()" class="waves-effect btn">Apply Settings</a> </form> </div> <ul class="collection with-header"> <li class="collection-header"><h4>Listening tags</h4></li> <li class="collection-item" ng-repeat="(key, value) in sett.activities.parameters.listeningTags">{{ key }}<i ng-click="sett.removeTag(key)" class="right material-icons" style="cursor:pointer">remove_circle_outline</i></li> </ul> </div>'),a.put("views/signup.html",'<div class="container" style="margin-top:40px"> <div class="row"> <div class="col m6 s12"> <h2>{{ log.greeting }}</h2> <p class="flow-text">In a shared manner, accompany with your team all that occurs in your projects: the new tasks, problems and related improvements. Through a dashboard see information about each occurrence reported. Do everything in a simple and quick way, do not waste time. See and act.</p> </div> <div class="col m6 s12"> <h2 class="center-align">Sign Up</h2> <div class="row"> <form class="col s12"> <div class="row"> <div class="input-field col s12"> <input id="nickname" type="text" class="validate" ng-model="user.nickname"> <label for="nickname">Nickname</label> </div> </div> <div class="row"> <div class="input-field col s12"> <input id="email" type="email" class="validate" ng-model="user.email"> <label for="email">Email</label> </div> </div> <div class="row"> <div class="input-field col s12"> <input id="pass" type="password" class="validate" ng-model="user.password"> <label for="pass">Password</label> </div> </div> <div class="row"> <div class="col s12"> <p><a ui-sref="login">Already have an account? Login.</a></p> </div> </div> <div class="divider"></div> <div class="row"> <div class="col m12 s12"> <p class="right-align"> <button class="btn waves-effect waves-light" type="submit" ng-click="log.signUp(user)"> <i class="small material-icons">done</i> </button> </p> </div> </div> </form> </div> </div> </div> </div>');
}]);